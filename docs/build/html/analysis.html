<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>prodigy.analysis &#8212; Prodigy  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/katex-math.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js"></script>
    <script src="_static/katex_autorenderer.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="prodigy.util" href="util.html" />
    <link rel="prev" title="prodigy.pysmt" href="pysmt.html" />
    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="_static/bootstrap-sphinx.js "></script>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;1,400&family=Source+Serif+Pro:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        body {
            font: 15px/1.4 "Source Sans Pro",sans-serif;
        }
        h1, h2, h3, h5, h6, h6 {
            font-family: "Source Sans Pro",sans-serif;
        }
        p {
            font-family: "Source Serif Pro",serif;
        }
        .py, .field-list p, pre, code {
            font-family: 'Source Code Pro', monospace;
        }

        /* fix navbar overlaying contents when clicking on anchors */
        :target::before {
            content: "";
            display: block;
            height: 60px; /* fixed header height*/
            margin: -60px 0 0; /* negative fixed header height */
            background: none;
        }

        /* hack to limit the yellow highlight to the the children of the target,
           because of the above hack the target's highlight would be way too large */
        dt:target {
            background-color: transparent;
        }
        dt:target > * {
            background-color: #fbe54e;
        }

        /* spacing adjustments */
        .section {
            margin-bottom: 10rem;
            margin-top: 6rem;
        }
        div.body > .section:first-of-type {
            margin-top: 0rem;
        }
        .class, .function, .data {
            margin-top: 5rem;
            margin-bottom: 7rem;
            border-left: 1px solid #eee;
            padding-left: 1rem;
        }
        dl.attribute > dd, dl.class > dd, dl.function > dd, dl.method > dd {
            margin-left: 30px;
        }
        p {
            margin-top: 1.05em;
            margin-bottom: 1.05em;
            text-align: justify;
        }
        .field-list p, li p {
            text-align: left;
        }
        /* adjust font sizes */
        dl.field-list, dl.attribute {
            font-size: 90%;
        }
        .math {
            font-size: 90.09%;
        }
    </style>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          Prodigy</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://github.com/Philipp15b/probably">GitHub Repository</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Contents <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="pysmt.html"><code class="docutils literal notranslate"><span class="pre">prodigy.pysmt</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="pysmt.html#translation-context">Translation Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="pysmt.html#expression-translation">Expression Translation</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">prodigy.analysis</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#forward-analysis">Forward Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-semantics">The Semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#distribution">Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-configuration">Analysis Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#forward-analysis-config">Forward Analysis Config</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-prodigy.analysis.backward.wp">Backward Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#weakest-pre-expectations">Weakest Pre-Expectations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#loop-free">Loop-Free</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transformers">Transformers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#loops">Loops</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="util.html"><code class="docutils literal notranslate"><span class="pre">prodigy.util</span></code></a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<h4 style="padding: 5px 20px">Contents</h4>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="pysmt.html"><code class="docutils literal notranslate"><span class="pre">prodigy.pysmt</span></code></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">prodigy.analysis</span></code></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#forward-analysis">Forward Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-semantics">The Semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#distribution">Distribution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-configuration">Analysis Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#forward-analysis-config">Forward Analysis Config</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-prodigy.analysis.backward.wp">Backward Analysis</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#weakest-pre-expectations">Weakest Pre-Expectations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#loop-free">Loop-Free</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transformers">Transformers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#loops">Loops</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="util.html"><code class="docutils literal notranslate"><span class="pre">prodigy.util</span></code></a></li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <span class="target" id="module-prodigy.analysis"></span><div class="section" id="prodigy-analysis">
<h1><code class="docutils literal notranslate"><span class="pre">prodigy.analysis</span></code><a class="headerlink" href="#prodigy-analysis" title="Permalink to this headline">¶</a></h1>
<p>The analysis module provides functionalities to analyze probablistic programs written in pGCL language.</p>
<dl class="simple">
<dt>There are two main types of analysis:</dt><dd><ul class="simple">
<li><p>Forwards Analysis</p></li>
<li><p>Backwards Analysis</p></li>
</ul>
</dd>
</dl>
<p>The <em>forward analysis</em> module considers a distribution transformer semantics, i.e., given a program and an initial distribution,
it computes (if possible) the exact output distribution. Sometimes, when this is not computable, approximations can be
derived.</p>
<p>The <em>backwards semantics</em> module considers expectation transoformer semantics a la weakest preexpectation calculus [Kam19].</p>
<span class="target" id="module-prodigy.analysis.forward"></span><div class="section" id="forward-analysis">
<h2>Forward Analysis<a class="headerlink" href="#forward-analysis" title="Permalink to this headline">¶</a></h2>
<p>The semantics transformation of the forwards analysis is mainly specified in the instruction handlers. They provide
the actual semantics on a generic level without knowing any specific encoding of a probability distribution.</p>
<div class="section" id="the-semantics">
<h3>The Semantics<a class="headerlink" href="#the-semantics" title="Permalink to this headline">¶</a></h3>
<p>The semantics of a probabilistic program is defined as a distribution transformer. Each individual program instruction
is handled via a dedicated instruction handler. These handlers describe on a generic level, how the input distribution
is changed after executing the program instruction. This is oftentimes not computable, i.e., when the input distribution
has infinite support, or in case of while-loop instructions.</p>
<span class="target" id="module-prodigy.analysis.forward.instruction_handler"></span><dl class="py function">
<dt id="prodigy.analysis.forward.instruction_handler.compute_discrete_distribution">
<code class="sig-name descname"><span class="pre">compute_discrete_distribution</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#compute_discrete_distribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.compute_discrete_distribution" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]]]) – </p></li>
<li><p><strong>dist</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.InstructionHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">InstructionHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#InstructionHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.InstructionHandler" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class that defines a strategy for handling a specific program instruction.</p>
<dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.InstructionHandler.compute">
<em class="property"><span class="pre">abstract</span> <span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instruction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distribution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#InstructionHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.InstructionHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instruction</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]]]) – </p></li>
<li><p><strong>distribution</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.SequenceHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">SequenceHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#SequenceHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.SequenceHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py attribute">
<dt id="prodigy.analysis.forward.instruction_handler.SequenceHandler.normalization">
<code class="sig-name descname"><span class="pre">normalization</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><em class="property"> <span class="pre">=</span> <span class="pre">False</span></em><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.SequenceHandler.normalization" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.SequenceHandler.compute">
<em class="property"><span class="pre">classmethod</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">instr</span></em>, <em class="sig-param"><span class="pre">dist</span></em>, <em class="sig-param"><span class="pre">config=ForwardAnalysisConfig(show_intermediate_steps=False</span></em>, <em class="sig-param"><span class="pre">show_rational_probabilities=False</span></em>, <em class="sig-param"><span class="pre">use_simplification=False</span></em>, <em class="sig-param"><span class="pre">use_latex=False</span></em>, <em class="sig-param"><span class="pre">engine=&lt;Engine.SYMPY:</span> <span class="pre">1&gt;)</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#SequenceHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.SequenceHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]]]) – </p></li>
<li><p><strong>dist</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.QueryHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">QueryHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#QueryHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.QueryHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.QueryHandler.compute">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#QueryHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.QueryHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]) – </p></li>
<li><p><strong>dist</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.SampleHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">SampleHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#SampleHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.SampleHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.SampleHandler.compute">
<em class="property"><span class="pre">abstract</span> <span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#SampleHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.SampleHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]) – </p></li>
<li><p><strong>dist</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.AssignmentHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">AssignmentHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#AssignmentHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.AssignmentHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.AssignmentHandler.compute">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#AssignmentHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.AssignmentHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]) – </p></li>
<li><p><strong>dist</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.ObserveHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ObserveHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#ObserveHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.ObserveHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.ObserveHandler.compute">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instruction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">distribution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#ObserveHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.ObserveHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instruction</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]) – </p></li>
<li><p><strong>distribution</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.PChoiceHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">PChoiceHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#PChoiceHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.PChoiceHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.PChoiceHandler.compute">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#PChoiceHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.PChoiceHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]) – </p></li>
<li><p><strong>dist</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.ITEHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ITEHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#ITEHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.ITEHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.ITEHandler.compute">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#ITEHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.ITEHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]) – </p></li>
<li><p><strong>dist</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.LoopHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">LoopHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#LoopHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.LoopHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.LoopHandler.compute">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#LoopHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.LoopHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]) – </p></li>
<li><p><strong>dist</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.instruction_handler.WhileHandler">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">WhileHandler</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#WhileHandler"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.WhileHandler" title="Permalink to this definition">¶</a></dt>
<dd><dl class="py method">
<dt id="prodigy.analysis.forward.instruction_handler.WhileHandler.compute">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">compute</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/instruction_handler.html#WhileHandler.compute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.instruction_handler.WhileHandler.compute" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]) – </p></li>
<li><p><strong>dist</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>) – </p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="prodigy.analysis.forward.config.ForwardAnalysisConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">ForwardAnalysisConfig</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="distribution">
<h3>Distribution<a class="headerlink" href="#distribution" title="Permalink to this headline">¶</a></h3>
<p>Distributions are the core objects to transform by a probabilistic program. This class specifies a generaic interface
with desired convenience methods needed, in order to abstract away from an actual distribution encoding.
In fact, we deliver two types of distribution backends:</p>
<ol class="arabic simple">
<li><p>A <cite>sympy</cite> implementation of generating functions</p></li>
<li><p>A <cite>GiNaC</cite> C++ implementation shipped as a <cite>pybind11</cite> module.</p></li>
</ol>
<span class="target" id="module-prodigy.analysis.forward.distribution"></span><dl class="py class">
<dt id="prodigy.analysis.forward.distribution.MarginalType">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">MarginalType</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#MarginalType"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.MarginalType" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the type of marginalization.</p>
<dl class="py attribute">
<dt id="prodigy.analysis.forward.distribution.MarginalType.Include">
<code class="sig-name descname"><span class="pre">Include</span></code><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#prodigy.analysis.forward.distribution.MarginalType.Include" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.forward.distribution.MarginalType.Exclude">
<code class="sig-name descname"><span class="pre">Exclude</span></code><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#prodigy.analysis.forward.distribution.MarginalType.Exclude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt id="prodigy.analysis.forward.distribution.Distribution">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Distribution</span></code><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution" title="Permalink to this definition">¶</a></dt>
<dd><p>Abstract class that models different representations of probability distributions.</p>
<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.copy">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">copy</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">deep</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.copy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a full copy of itself.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>deep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.get_probability_of">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">get_probability_of</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.get_probability_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.get_probability_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the probability of a given <cite>condition</cite> or variable.
:type condition: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]
:param condition: The condition.
:return: The probability that the condition is satisfied.</p>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.get_probability_mass">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">get_probability_mass</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.get_probability_mass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.get_probability_mass" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the probability mass of the distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.get_expected_value_of">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">get_expected_value_of</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expression</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.get_expected_value_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.get_expected_value_of" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the expected value of the expression <cite>expression</cite> evaluated in the distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expression</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.normalize">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">normalize</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.normalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalizes the probability mass of the distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.get_variables">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">get_variables</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.get_variables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.get_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the free variables of the distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.get_parameters">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">get_parameters</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.get_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.get_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the parameters of the distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Set" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Set</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.filter">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">filter</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">condition</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.filter"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Filters the distribution such that only the parts which satisfy the <cite>condition</cite> are left.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>condition</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.is_zero_dist">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">is_zero_dist</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.is_zero_dist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.is_zero_dist" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether the distribution encodes the 0 distribution.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.is_finite">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">is_finite</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.is_finite"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.is_finite" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether the distribution has finite support.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.update">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">update</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expression</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.update"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the distribution by the result of the expression.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>expression</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]) – </p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.update_iid">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">update_iid</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sampling_exp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.update_iid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.update_iid" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the distribution by the the iid-sampling rules.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sampling_exp</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>) – </p></li>
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.marginal">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">marginal</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">*variables</span></em>, <em class="sig-param"><span class="pre">method=&lt;MarginalType.Include:</span> <span class="pre">1&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.marginal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.marginal" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the marginal distribution for the given variables (MarginalType.Include),
or for all but the given variables (MarginalType.Exclude).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variables</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>]) – </p></li>
<li><p><strong>method</strong> (<a class="reference internal" href="#prodigy.analysis.forward.distribution.MarginalType" title="prodigy.analysis.forward.distribution.MarginalType"><code class="xref py py-class docutils literal notranslate"><span class="pre">MarginalType</span></code></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.set_variables">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">set_variables</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">variables</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.set_variables"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.set_variables" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the free variables in a distribution.
:type variables: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>
:param variables: The variables.
:rtype: <a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>
:return:  The distribution with free variables <cite>variables</cite></p>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.distribution.Distribution.approximate">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">approximate</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">threshold</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/distribution.html#Distribution.approximate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.distribution.Distribution.approximate" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the approximation until the given threshold is reached. (Might not terminate)
:type threshold: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>]
:param threshold: The threshold either as a maximum number of states, or a certain probability mass.
:rtype: <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generator" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generator</span></code></a>[<a class="reference internal" href="#prodigy.analysis.forward.distribution.Distribution" title="prodigy.analysis.forward.distribution.Distribution"><code class="xref py py-class docutils literal notranslate"><span class="pre">Distribution</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.10)"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></a>]
:return: The approximated (truncated) probability distribution.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="analysis-configuration">
<h3>Analysis Configuration<a class="headerlink" href="#analysis-configuration" title="Permalink to this headline">¶</a></h3>
<p>Sometimes, intermediate steps of the computation are desired. This and more configurations can be setup in a
<cite>ForwardAnalysisConfig</cite> object. Here also different backend Engines can be chosen.</p>
<span class="target" id="module-prodigy.analysis.forward.config"></span><div class="section" id="forward-analysis-config">
<h4>Forward Analysis Config<a class="headerlink" href="#forward-analysis-config" title="Permalink to this headline">¶</a></h4>
<dl class="py class">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ForwardAnalysisConfig</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">show_intermediate_steps=False</span></em>, <em class="sig-param"><span class="pre">show_rational_probabilities=False</span></em>, <em class="sig-param"><span class="pre">use_simplification=False</span></em>, <em class="sig-param"><span class="pre">use_latex=False</span></em>, <em class="sig-param"><span class="pre">engine=&lt;Engine.SYMPY:</span> <span class="pre">1&gt;</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/config.html#ForwardAnalysisConfig"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Global configurable options for forward analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>show_intermediate_steps</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>show_rational_probabilities</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>use_simplification</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>use_latex</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – </p></li>
<li><p><strong>engine</strong> (<a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine" title="prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine"><code class="xref py py-class docutils literal notranslate"><span class="pre">Engine</span></code></a>) – </p></li>
</ul>
</dd>
</dl>
<dl class="py class">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Engine</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/forward/config.html#ForwardAnalysisConfig.Engine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine" title="Permalink to this definition">¶</a></dt>
<dd><p>This enumeration specifies the type of backend used for distribution encodings and mathematical operations.</p>
<dl class="py attribute">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine.SYMPY">
<code class="sig-name descname"><span class="pre">SYMPY</span></code><em class="property"> <span class="pre">=</span> <span class="pre">1</span></em><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine.SYMPY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine.GINAC">
<code class="sig-name descname"><span class="pre">GINAC</span></code><em class="property"> <span class="pre">=</span> <span class="pre">2</span></em><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine.GINAC" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.show_intermediate_steps">
<code class="sig-name descname"><span class="pre">show_intermediate_steps</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.show_intermediate_steps" title="Permalink to this definition">¶</a></dt>
<dd><p>Displays the probabilities in rational form. This does not change the preciseness of computation.</p>
</dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.show_rational_probabilities">
<code class="sig-name descname"><span class="pre">show_rational_probabilities</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.show_rational_probabilities" title="Permalink to this definition">¶</a></dt>
<dd><p>Enables simplification heuristics for expressions.</p>
</dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.use_simplification">
<code class="sig-name descname"><span class="pre">use_simplification</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.use_simplification" title="Permalink to this definition">¶</a></dt>
<dd><p>Toggle to print LaTeX-Code instead of ASCII expressions.</p>
</dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.use_latex">
<code class="sig-name descname"><span class="pre">use_latex</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><span class="pre">bool</span></a></em><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.use_latex" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects the distribution backend.</p>
</dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.engine">
<code class="sig-name descname"><span class="pre">engine</span></code><em class="property"><span class="pre">:</span> <a class="reference internal" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine" title="prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine"><span class="pre">prodigy.analysis.forward.config.ForwardAnalysisConfig.Engine</span></a></em><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.engine" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.optimizer">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">optimizer</span></code><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.optimizer" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">Optimizer</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.forward.config.ForwardAnalysisConfig.factory">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">factory</span></code><a class="headerlink" href="#prodigy.analysis.forward.config.ForwardAnalysisConfig.factory" title="Permalink to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Type</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">CommonDistributionsFactory</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
<span class="target" id="module-prodigy.analysis.backward"></span><div class="section" id="module-prodigy.analysis.backward.wp">
<span id="backward-analysis"></span><h2>Backward Analysis<a class="headerlink" href="#module-prodigy.analysis.backward.wp" title="Permalink to this headline">¶</a></h2>
<div class="section" id="weakest-pre-expectations">
<h3>Weakest Pre-Expectations<a class="headerlink" href="#weakest-pre-expectations" title="Permalink to this headline">¶</a></h3>
<p>Want to calculate the weakest pre-expectation of a program?
You’re in the right module! You can read all about weakest pre-expectations of
probabilistic programs in <a class="reference internal" href="#kam19" id="id1"><span>[kam19]</span></a>.</p>
<p>The basic function is <a class="reference internal" href="#id0" title="prodigy.analysis.backward.wp.loopfree_wp"><code class="xref py py-func docutils literal notranslate"><span class="pre">loopfree_wp()</span></code></a>. It calculates weakest
pre-expectations of loop-free programs. <code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp()</span></code> can calculate
weakest pre-expectations of programs that consist of exactly one loop (see
<span class="xref std std-ref">one_big_loop</span>). <code class="xref py py-func docutils literal notranslate"><span class="pre">general_wp()</span></code> is applicable to all pGCL programs, but
can produce extraordinarily ugly outputs.</p>
<p class="rubric">Expected Runtimes</p>
<p>All functions also support computation of <em>expected runtimes</em> (see chapter 7 of
<a class="reference internal" href="#kam19" id="id2"><span>[kam19]</span></a>), which are given by <code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.ast.TickInstr</span></code> and
represented in the computed expectations as a
<code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.ast.TickExpr</span></code>.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := 5; tick(5)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformer</span> <span class="o">=</span> <span class="n">loopfree_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">transformer</span><span class="p">)</span>
<span class="go">λ𝑋. ((𝑋)[x/5]) + (tick(5))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformer</span>
<span class="go">ExpectationTransformer(variable=&#39;𝑋&#39;, expectation=BinopExpr(operator=Binop.PLUS, lhs=SubstExpr(subst={&#39;x&#39;: NatLitExpr(5)}, expr=VarExpr(&#39;𝑋&#39;)), rhs=TickExpr(expr=NatLitExpr(5))))</span>
</pre></div>
</div>
<p>It is always possible to represent expected runtimes in such a way.
Theorem 7.11 of <a class="reference internal" href="#kam19" id="id3"><span>[kam19]</span></a> (page 173):</p>
<div class="math">
\[\mathrm{ert}\llbracket{}C\rrbracket(t) = \mathrm{ert}\llbracket{}C\rrbracket(0) + \mathrm{backward}\llbracket{}C\rrbracket{}(t)\]</div>
<p>Therefore the weakest pre-expectation of a program with <code class="docutils literal notranslate"><span class="pre">tick</span></code> instructions
can be obtained by simply ignoring all <code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.ast.TickExpr</span></code> in
the returned expectation, i.e. replacing them all by zero.</p>
<dl class="citation">
<dt class="label" id="kam19"><span class="brackets">kam19</span><span class="fn-backref">(<a href="#id1">1</a>,<a href="#id2">2</a>,<a href="#id3">3</a>)</span></dt>
<dd><p><a class="reference external" href="https://publications.rwth-aachen.de/record/755408/files/755408.pdf">Advanced Weakest Precondition Calculi for Probabilistic Programs</a>, Benjamin Kaminski, 2019.</p>
</dd>
</dl>
<div class="section" id="loop-free">
<h4>Loop-Free<a class="headerlink" href="#loop-free" title="Permalink to this headline">¶</a></h4>
<p>The definition of loop-free weakest pre-expectations (and expected runtimes) is
rather straightforward.</p>
<dl class="py function">
<dt id="prodigy.analysis.backward.wp.loopfree_wp">
<code class="sig-name descname"><span class="pre">loopfree_wp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postexpectation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#loopfree_wp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.backward.wp.loopfree_wp" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the weakest preexpectation as an expression. See also
<a class="reference internal" href="#id11" title="prodigy.analysis.backward.wp.loopfree_wp_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">loopfree_wp_transformer()</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Loops are not supported by this function.</p>
</div>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>At the moment, the returned expression is a tree and not a DAG.
Subexpressions that occur multiple times are <em>deepcopied</em>, even though that
is not strictly necessary. For example, <code class="docutils literal notranslate"><span class="pre">jump</span> <span class="pre">:=</span> <span class="pre">unif(0,1);</span> <span class="pre">t</span> <span class="pre">:=</span> <span class="pre">t</span> <span class="pre">+</span> <span class="pre">1</span></code>
creates an AST where the second assignment occurs twice, as different Python objects,
even though the two substitutions generated by the <em>uniform</em> expression could reuse it.
We do this because the <code class="xref py py-mod docutils literal notranslate"><span class="pre">prodigy.pgcl.substitute</span></code> module cannot yet handle non-tree ASTs.</p>
</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.ast</span> <span class="kn">import</span> <span class="n">RealLitExpr</span><span class="p">,</span> <span class="n">VarExpr</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool a; bool x; if (a) { x := 1 } </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">RealLitExpr</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;([a] * ((1.0)[x/1])) + ([not a] * 1.0)&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool a; bool x; if (a) { { x := 1 } [0.5] {x := 2 } } </span><span class="si">{}</span><span class="s2"> x := x + 1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;([a] * (((((x)[x/x + 1])[x/1]) * 0.5) + ((((x)[x/x + 1])[x/2]) * (1.0 - 0.5)))) + ([not a] * ((x)[x/x + 1]))&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x; x := unif(1, 4)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;(((1/4 * ((x)[x/1])) + (1/4 * ((x)[x/2]))) + (1/4 * ((x)[x/3]))) + (1/4 * ((x)[x/4]))&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; x := true : 0.5 + false : 0.5;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;(0.5 * ((x)[x/true])) + (0.5 * ((x)[x/false]))&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]]]) – The instruction to calculate the backward for, or a list of instructions.</p></li>
<li><p><strong>postexpectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]) – The postexpectation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="transformers">
<h4>Transformers<a class="headerlink" href="#transformers" title="Permalink to this headline">¶</a></h4>
<dl class="py class">
<dt id="prodigy.analysis.backward.wp.ExpectationTransformer">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ExpectationTransformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expectation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#ExpectationTransformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.backward.wp.ExpectationTransformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps an expectation <span class="math">\(f\)</span> (represented by
<code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.ast.Expr</span></code>) and holds a reference to a variable
<span class="math">\(v\)</span>. Together they represent an <em>expectation transformer</em>, a function
<span class="math">\(\Phi : \mathbb{E} \to \mathbb{E}\)</span> mapping expectations to
expectations.</p>
<p>An expectation is applied (<span class="math">\(\Phi(g)\)</span>) by replacing <span class="math">\(f\)</span> by
<span class="math">\(g\)</span>.</p>
<p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">prodigy.pgcl.simplify</span></code> module can translate expectation
transformers into <em>summation normal form</em>. See
<code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.simplify.SnfExpectationTransformer</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">prodigy.pgcl.simplify.normalize_expectation_transformer()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>expectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="prodigy.analysis.backward.wp.ExpectationTransformer.variable">
<code class="sig-name descname"><span class="pre">variable</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#prodigy.analysis.backward.wp.ExpectationTransformer.variable" title="Permalink to this definition">¶</a></dt>
<dd><p>The variable occuring in <a class="reference internal" href="#id8" title="prodigy.analysis.backward.wp.ExpectationTransformer.expectation"><code class="xref py py-data docutils literal notranslate"><span class="pre">expectation</span></code></a>. Must not occur in the
program.</p>
</dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.backward.wp.ExpectationTransformer.expectation">
<code class="sig-name descname"><span class="pre">expectation</span></code><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">prodigy.pgcl.ast.expressions.VarExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BoolLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.NatLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.RealLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.UnopExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BinopExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.CategoricalExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.SubstExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.TickExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.DUniformExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.CUniformExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BernoulliExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.GeometricExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.PoissonExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.LogDistExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BinomialExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.IidSampleExpr</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#prodigy.analysis.backward.wp.ExpectationTransformer.expectation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.backward.wp.ExpectationTransformer.substitute">
<code class="sig-name descname"><span class="pre">substitute</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#ExpectationTransformer.substitute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.backward.wp.ExpectationTransformer.substitute" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply all <code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.ast.SubstExpr</span></code> using
<code class="xref py py-func docutils literal notranslate"><span class="pre">prodigy.pgcl.substitute.substitute_expr()</span></code>, keeping
<a class="reference internal" href="#id7" title="prodigy.analysis.backward.wp.ExpectationTransformer.variable"><code class="xref py py-data docutils literal notranslate"><span class="pre">variable</span></code></a> symbolic.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">self</span></code> for convenience.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="prodigy.analysis.backward.wp.ExpectationTransformer.apply">
<code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expectation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substitute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#ExpectationTransformer.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.backward.wp.ExpectationTransformer.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform the given expectation with this expectation transformer.</p>
<p>The result is the modified internal expression with the variable
replaced by the post-expectation, i.e. <code class="docutils literal notranslate"><span class="pre">self.expectation</span></code>.</p>
<p><strong>Calling this method will change this object!</strong></p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := 3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">backward</span> <span class="o">=</span> <span class="n">loopfree_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">backward</span><span class="p">)</span>
<span class="go">λ𝑋. (𝑋)[x/3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">backward</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)))</span>
<span class="go">3</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to apply all remaining substitutions in the expectation.</p></li>
<li><p><strong>expectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="prodigy.analysis.backward.wp.loopfree_wp_transformer">
<code class="sig-name descname"><span class="pre">loopfree_wp_transformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">program</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'𝑋'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substitute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#loopfree_wp_transformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.backward.wp.loopfree_wp_transformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Generalized version of <a class="reference internal" href="#id0" title="prodigy.analysis.backward.wp.loopfree_wp"><code class="xref py py-func docutils literal notranslate"><span class="pre">loopfree_wp()</span></code></a> that returns an
<a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional name for the variable to be used for the transformer. Must not occur elsewhere in the program.</p></li>
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <a class="reference internal" href="#id9" title="prodigy.analysis.backward.wp.ExpectationTransformer.substitute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpectationTransformer.substitute()</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p></li>
<li><p><strong>program</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code>) – </p></li>
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="loops">
<h4>Loops<a class="headerlink" href="#loops" title="Permalink to this headline">¶</a></h4>
<p>The <span class="math">\(\mathrm{backward}\)</span> semantics of loops require a least fixed-point. It is
undecidable to compute. We do not represent least-fixed points explicitely in
our AST (see <code class="xref py py-mod docutils literal notranslate"><span class="pre">prodigy.pgcl.ast</span></code>), but instead represent the weakest
pre-expectation transformer of a <strong>single loop</strong> (without any more nested loops)
with optional initialization by a special <a class="reference internal" href="#id12" title="prodigy.analysis.backward.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a>.
For such programs with exactly one loop, <code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp()</span></code> can calculate the
<a class="reference internal" href="#id12" title="prodigy.analysis.backward.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a>.</p>
<p>The function <code class="xref py py-func docutils literal notranslate"><span class="pre">general_wp()</span></code> is applicable to <strong>all</strong> pGCL programs. It uses
<code class="xref py py-func docutils literal notranslate"><span class="pre">prodigy.pgcl.cfg.program_one_big_loop()</span></code> to transform arbitrarily structured
programs into programs with one loop. Then it uses <code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp()</span></code> to
compute the <a class="reference internal" href="#id12" title="prodigy.analysis.backward.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a>.</p>
<dl class="py class">
<dt id="prodigy.analysis.backward.wp.LoopExpectationTransformer">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">LoopExpectationTransformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">init</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">done</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#LoopExpectationTransformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.backward.wp.LoopExpectationTransformer" title="Permalink to this definition">¶</a></dt>
<dd><p>The expectation <em>transformer</em> for a pGCL program with <strong>exactly one loop and
optional initialization assignments before the loop</strong>.
See <code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp()</span></code>.</p>
<p>A loop’s expectation transformer is represented by the initialization
assignments themselves, an expectation transformer for the body, and a
<a class="reference internal" href="#id15" title="prodigy.analysis.backward.wp.LoopExpectationTransformer.done"><code class="xref py py-data docutils literal notranslate"><span class="pre">done</span></code></a> term which is the expectation for loop termination.</p>
<p>Note that <a class="reference internal" href="#id15" title="prodigy.analysis.backward.wp.LoopExpectationTransformer.done"><code class="xref py py-data docutils literal notranslate"><span class="pre">done</span></code></a> is not represented by an expectation transformer, but
rather just an expectation (<code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.ast.Expr</span></code>). This is
because the term in the weakest pre-expectation semantics for termination of
the while loop never contains the post-expectation <span class="math">\(f\)</span> (it is just
multiplied with it). A simpler representation allows for more convenient
further use. The <span class="math">\(\mathrm{backward}\)</span> semantics of a <code class="docutils literal notranslate"><span class="pre">while</span></code> loop are shown
below:</p>
<div class="math">
\[\mathrm{backward}\llbracket{}\mathtt{while} (b) \{ C \}\rrbracket(f) = \mathrm{lfp}~X.~ \underbrace{[b] \cdot \mathrm{backward}\llbracket{}C\rrbracket{}(X)}_{\text{body}} + \underbrace{[\neg b]}_{\text{done}} \cdot f\]</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; x := true; while (x) { x := false }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformer</span> <span class="o">=</span> <span class="n">one_loop_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">transformer</span><span class="p">)</span>
<span class="go">x := true;</span>
<span class="go">λ𝐹. lfp 𝑋. [x] * ((𝑋)[x/false]) + [not x] * 𝐹</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">transformer</span><span class="p">))</span>
<span class="go">LoopExpectationTransformer(init=[AsgnInstr(lhs=&#39;x&#39;, rhs=BoolLitExpr(True))], body=ExpectationTransformer(variable=&#39;𝑋&#39;, expectation=BinopExpr(operator=Binop.TIMES, lhs=UnopExpr(operator=Unop.IVERSON, expr=VarExpr(&#39;x&#39;)), rhs=SubstExpr(subst={&#39;x&#39;: BoolLitExpr(False)}, expr=VarExpr(&#39;𝑋&#39;)))), done=UnopExpr(operator=Unop.IVERSON, expr=UnopExpr(operator=Unop.NEG, expr=VarExpr(&#39;x&#39;))))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>init</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>]) – </p></li>
<li><p><strong>body</strong> (<a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a>) – </p></li>
<li><p><strong>done</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="prodigy.analysis.backward.wp.LoopExpectationTransformer.init">
<code class="sig-name descname"><span class="pre">init</span></code><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">prodigy.pgcl.ast.instructions.AsgnInstr</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#prodigy.analysis.backward.wp.LoopExpectationTransformer.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initial assignments before the loop.</p>
</dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.backward.wp.LoopExpectationTransformer.body">
<code class="sig-name descname"><span class="pre">body</span></code><em class="property"><span class="pre">:</span> <a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><span class="pre">prodigy.analysis.backward.wp.ExpectationTransformer</span></a></em><a class="headerlink" href="#prodigy.analysis.backward.wp.LoopExpectationTransformer.body" title="Permalink to this definition">¶</a></dt>
<dd><p>The expectation transformer for the loop’s body.</p>
</dd></dl>

<dl class="py attribute">
<dt id="prodigy.analysis.backward.wp.LoopExpectationTransformer.done">
<code class="sig-name descname"><span class="pre">done</span></code><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">prodigy.pgcl.ast.expressions.VarExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BoolLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.NatLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.RealLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.UnopExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BinopExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.CategoricalExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.SubstExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.TickExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.DUniformExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.CUniformExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BernoulliExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.GeometricExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.PoissonExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.LogDistExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BinomialExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.IidSampleExpr</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#prodigy.analysis.backward.wp.LoopExpectationTransformer.done" title="Permalink to this definition">¶</a></dt>
<dd><p>The expectation for when the loop is done.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="prodigy.analysis.backward.wp.one_loop_wp_transformer">
<code class="sig-name descname"><span class="pre">one_loop_wp_transformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">program</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'𝑋'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substitute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#one_loop_wp_transformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.backward.wp.one_loop_wp_transformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the weakest pre-expectation transformer of a program that consists
of exactly one while loop with some optional assignments at the beginning.
That means the only supported programs are of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">:=</span> <span class="n">e1</span>
<span class="n">y</span> <span class="o">:=</span> <span class="n">e2</span>
<span class="k">while</span> <span class="p">(</span><span class="n">cond</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span> <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; bool y; while(x) { { x := true } [0.5] { x := y } }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">one_loop_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">))</span>
<span class="go">λ𝐹. lfp 𝑋. [x] * ((((𝑋)[x/true]) * 0.5) + (((𝑋)[x/y]) * (1.0 - 0.5))) + [not x] * 𝐹</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; while(x) { if (x) { x := false } {x := true } }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">one_loop_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">))</span>
<span class="go">λ𝐹. lfp 𝑋. [x] * (([x] * ((𝑋)[x/false])) + ([not x] * ((𝑋)[x/true]))) + [not x] * 𝐹</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional name for the variable to be used for the transformer. Must not occur elsewhere in the program.</p></li>
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <a class="reference internal" href="#id9" title="prodigy.analysis.backward.wp.ExpectationTransformer.substitute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpectationTransformer.substitute()</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p></li>
<li><p><strong>program</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code>) – </p></li>
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#id12" title="prodigy.analysis.backward.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="prodigy.analysis.backward.wp.general_wp_transformer">
<code class="sig-name descname"><span class="pre">general_wp_transformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">program</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substitute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#general_wp_transformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#prodigy.analysis.backward.wp.general_wp_transformer" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the weakest pre-expectation transformer for any pGCL program. For
programs that consist of one big loop (see <span class="xref std std-ref">one_big_loop</span>),
<a class="reference internal" href="#id16" title="prodigy.analysis.backward.wp.one_loop_wp_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp_transformer()</span></code></a> is invoked directly. All other programs are
run through <code class="xref py py-func docutils literal notranslate"><span class="pre">prodigy.pgcl.cfg.program_one_big_loop()</span></code> first and then
<a class="reference internal" href="#id16" title="prodigy.analysis.backward.wp.one_loop_wp_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp_transformer()</span></code></a> is used. This will introduce a new,
additional variable for the program counter.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; while(x) { while (y) </span><span class="si">{}</span><span class="s2"> }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">general_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">))</span>
<span class="go">pc := 1;</span>
<span class="go">λ𝐹. lfp 𝑋. [not (pc = 0)] * (([pc = 1] * (([x] * ((𝑋)[pc/2])) + ([not x] * ((𝑋)[pc/0])))) + ([not (pc = 1)] * (([y] * ((𝑋)[pc/2])) + ([not y] * ((𝑋)[pc/1]))))) + [pc = 0] * 𝐹</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <a class="reference internal" href="#id9" title="prodigy.analysis.backward.wp.ExpectationTransformer.substitute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpectationTransformer.substitute()</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p></li>
<li><p><strong>program</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#id12" title="prodigy.analysis.backward.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="id0">
<code class="sig-name descname"><span class="pre">loopfree_wp</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">postexpectation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#loopfree_wp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id0" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the weakest preexpectation as an expression. See also
<a class="reference internal" href="#id11" title="prodigy.analysis.backward.wp.loopfree_wp_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">loopfree_wp_transformer()</span></code></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Loops are not supported by this function.</p>
</div>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<p>At the moment, the returned expression is a tree and not a DAG.
Subexpressions that occur multiple times are <em>deepcopied</em>, even though that
is not strictly necessary. For example, <code class="docutils literal notranslate"><span class="pre">jump</span> <span class="pre">:=</span> <span class="pre">unif(0,1);</span> <span class="pre">t</span> <span class="pre">:=</span> <span class="pre">t</span> <span class="pre">+</span> <span class="pre">1</span></code>
creates an AST where the second assignment occurs twice, as different Python objects,
even though the two substitutions generated by the <em>uniform</em> expression could reuse it.
We do this because the <code class="xref py py-mod docutils literal notranslate"><span class="pre">prodigy.pgcl.substitute</span></code> module cannot yet handle non-tree ASTs.</p>
</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.ast</span> <span class="kn">import</span> <span class="n">RealLitExpr</span><span class="p">,</span> <span class="n">VarExpr</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool a; bool x; if (a) { x := 1 } </span><span class="si">{}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">RealLitExpr</span><span class="p">(</span><span class="s2">&quot;1.0&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;([a] * ((1.0)[x/1])) + ([not a] * 1.0)&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool a; bool x; if (a) { { x := 1 } [0.5] {x := 2 } } </span><span class="si">{}</span><span class="s2"> x := x + 1&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;([a] * (((((x)[x/x + 1])[x/1]) * 0.5) + ((((x)[x/x + 1])[x/2]) * (1.0 - 0.5)))) + ([not a] * ((x)[x/x + 1]))&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;nat x; x := unif(1, 4)&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;(((1/4 * ((x)[x/1])) + (1/4 * ((x)[x/2]))) + (1/4 * ((x)[x/3]))) + (1/4 * ((x)[x/4]))&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; x := true : 0.5 + false : 0.5;&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="n">loopfree_wp</span><span class="p">(</span><span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">,</span> <span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">&#39;(0.5 * ((x)[x/true])) + (0.5 * ((x)[x/false]))&#39;</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]]]) – The instruction to calculate the backward for, or a list of instructions.</p></li>
<li><p><strong>postexpectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]) – The postexpectation.</p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="id6">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">ExpectationTransformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">variable</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">expectation</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#ExpectationTransformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id6" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps an expectation <span class="math">\(f\)</span> (represented by
<code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.ast.Expr</span></code>) and holds a reference to a variable
<span class="math">\(v\)</span>. Together they represent an <em>expectation transformer</em>, a function
<span class="math">\(\Phi : \mathbb{E} \to \mathbb{E}\)</span> mapping expectations to
expectations.</p>
<p>An expectation is applied (<span class="math">\(\Phi(g)\)</span>) by replacing <span class="math">\(f\)</span> by
<span class="math">\(g\)</span>.</p>
<p>The <code class="xref py py-mod docutils literal notranslate"><span class="pre">prodigy.pgcl.simplify</span></code> module can translate expectation
transformers into <em>summation normal form</em>. See
<code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.simplify.SnfExpectationTransformer</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">prodigy.pgcl.simplify.normalize_expectation_transformer()</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – </p></li>
<li><p><strong>expectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="id7">
<code class="sig-name descname"><span class="pre">variable</span></code><em class="property"><span class="pre">:</span> <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><span class="pre">str</span></a></em><a class="headerlink" href="#id7" title="Permalink to this definition">¶</a></dt>
<dd><p>The variable occuring in <a class="reference internal" href="#id8" title="prodigy.analysis.backward.wp.ExpectationTransformer.expectation"><code class="xref py py-data docutils literal notranslate"><span class="pre">expectation</span></code></a>. Must not occur in the
program.</p>
</dd></dl>

<dl class="py attribute">
<dt id="id8">
<code class="sig-name descname"><span class="pre">expectation</span></code><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">prodigy.pgcl.ast.expressions.VarExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BoolLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.NatLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.RealLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.UnopExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BinopExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.CategoricalExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.SubstExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.TickExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.DUniformExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.CUniformExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BernoulliExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.GeometricExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.PoissonExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.LogDistExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BinomialExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.IidSampleExpr</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id8" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="id9">
<code class="sig-name descname"><span class="pre">substitute</span></code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#ExpectationTransformer.substitute"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id9" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply all <code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.ast.SubstExpr</span></code> using
<code class="xref py py-func docutils literal notranslate"><span class="pre">prodigy.pgcl.substitute.substitute_expr()</span></code>, keeping
<a class="reference internal" href="#id7" title="prodigy.analysis.backward.wp.ExpectationTransformer.variable"><code class="xref py py-data docutils literal notranslate"><span class="pre">variable</span></code></a> symbolic.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">self</span></code> for convenience.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="id10">
<code class="sig-name descname"><span class="pre">apply</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">expectation</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substitute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#ExpectationTransformer.apply"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id10" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform the given expectation with this expectation transformer.</p>
<p>The result is the modified internal expression with the variable
replaced by the post-expectation, i.e. <code class="docutils literal notranslate"><span class="pre">self.expectation</span></code>.</p>
<p><strong>Calling this method will change this object!</strong></p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;x := 3&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">backward</span> <span class="o">=</span> <span class="n">loopfree_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">backward</span><span class="p">)</span>
<span class="go">λ𝑋. (𝑋)[x/3]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">backward</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">VarExpr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">)))</span>
<span class="go">3</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to apply all remaining substitutions in the expectation.</p></li>
<li><p><strong>expectation</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="id11">
<code class="sig-name descname"><span class="pre">loopfree_wp_transformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">program</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'𝑋'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substitute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#loopfree_wp_transformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id11" title="Permalink to this definition">¶</a></dt>
<dd><p>Generalized version of <a class="reference internal" href="#id0" title="prodigy.analysis.backward.wp.loopfree_wp"><code class="xref py py-func docutils literal notranslate"><span class="pre">loopfree_wp()</span></code></a> that returns an
<a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional name for the variable to be used for the transformer. Must not occur elsewhere in the program.</p></li>
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <a class="reference internal" href="#id9" title="prodigy.analysis.backward.wp.ExpectationTransformer.substitute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpectationTransformer.substitute()</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p></li>
<li><p><strong>program</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code>) – </p></li>
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Sequence</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="id12">
<em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">LoopExpectationTransformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">init</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">body</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">done</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#LoopExpectationTransformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id12" title="Permalink to this definition">¶</a></dt>
<dd><p>The expectation <em>transformer</em> for a pGCL program with <strong>exactly one loop and
optional initialization assignments before the loop</strong>.
See <code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp()</span></code>.</p>
<p>A loop’s expectation transformer is represented by the initialization
assignments themselves, an expectation transformer for the body, and a
<a class="reference internal" href="#id15" title="prodigy.analysis.backward.wp.LoopExpectationTransformer.done"><code class="xref py py-data docutils literal notranslate"><span class="pre">done</span></code></a> term which is the expectation for loop termination.</p>
<p>Note that <a class="reference internal" href="#id15" title="prodigy.analysis.backward.wp.LoopExpectationTransformer.done"><code class="xref py py-data docutils literal notranslate"><span class="pre">done</span></code></a> is not represented by an expectation transformer, but
rather just an expectation (<code class="xref py py-class docutils literal notranslate"><span class="pre">prodigy.pgcl.ast.Expr</span></code>). This is
because the term in the weakest pre-expectation semantics for termination of
the while loop never contains the post-expectation <span class="math">\(f\)</span> (it is just
multiplied with it). A simpler representation allows for more convenient
further use. The <span class="math">\(\mathrm{backward}\)</span> semantics of a <code class="docutils literal notranslate"><span class="pre">while</span></code> loop are shown
below:</p>
<div class="math">
\[\mathrm{backward}\llbracket{}\mathtt{while} (b) \{ C \}\rrbracket(f) = \mathrm{lfp}~X.~ \underbrace{[b] \cdot \mathrm{backward}\llbracket{}C\rrbracket{}(X)}_{\text{body}} + \underbrace{[\neg b]}_{\text{done}} \cdot f\]</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; x := true; while (x) { x := false }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformer</span> <span class="o">=</span> <span class="n">one_loop_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">transformer</span><span class="p">)</span>
<span class="go">x := true;</span>
<span class="go">λ𝐹. lfp 𝑋. [x] * ((𝑋)[x/false]) + [not x] * 𝐹</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">transformer</span><span class="p">))</span>
<span class="go">LoopExpectationTransformer(init=[AsgnInstr(lhs=&#39;x&#39;, rhs=BoolLitExpr(True))], body=ExpectationTransformer(variable=&#39;𝑋&#39;, expectation=BinopExpr(operator=Binop.TIMES, lhs=UnopExpr(operator=Unop.IVERSON, expr=VarExpr(&#39;x&#39;)), rhs=SubstExpr(subst={&#39;x&#39;: BoolLitExpr(False)}, expr=VarExpr(&#39;𝑋&#39;)))), done=UnopExpr(operator=Unop.IVERSON, expr=UnopExpr(operator=Unop.NEG, expr=VarExpr(&#39;x&#39;))))</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>init</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>]) – </p></li>
<li><p><strong>body</strong> (<a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationTransformer</span></code></a>) – </p></li>
<li><p><strong>done</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">VarExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BoolLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">NatLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RealLitExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">UnopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinopExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CategoricalExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">SubstExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">DUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">CUniformExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BernoulliExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">GeometricExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PoissonExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LogDistExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">BinomialExpr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IidSampleExpr</span></code>]) – </p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt id="id13">
<code class="sig-name descname"><span class="pre">init</span></code><em class="property"><span class="pre">:</span> <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">prodigy.pgcl.ast.instructions.AsgnInstr</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id13" title="Permalink to this definition">¶</a></dt>
<dd><p>Initial assignments before the loop.</p>
</dd></dl>

<dl class="py attribute">
<dt id="id14">
<code class="sig-name descname"><span class="pre">body</span></code><em class="property"><span class="pre">:</span> <a class="reference internal" href="#id6" title="prodigy.analysis.backward.wp.ExpectationTransformer"><span class="pre">prodigy.analysis.backward.wp.ExpectationTransformer</span></a></em><a class="headerlink" href="#id14" title="Permalink to this definition">¶</a></dt>
<dd><p>The expectation transformer for the loop’s body.</p>
</dd></dl>

<dl class="py attribute">
<dt id="id15">
<code class="sig-name descname"><span class="pre">done</span></code><em class="property"><span class="pre">:</span> <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">prodigy.pgcl.ast.expressions.VarExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BoolLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.NatLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.RealLitExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.UnopExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BinopExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.CategoricalExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.SubstExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.TickExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.DUniformExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.CUniformExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BernoulliExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.GeometricExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.PoissonExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.LogDistExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.BinomialExpr</span><span class="p"><span class="pre">,</span> </span><span class="pre">prodigy.pgcl.ast.expressions.IidSampleExpr</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#id15" title="Permalink to this definition">¶</a></dt>
<dd><p>The expectation for when the loop is done.</p>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt id="id16">
<code class="sig-name descname"><span class="pre">one_loop_wp_transformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">program</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variable</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'𝑋'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substitute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#one_loop_wp_transformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id16" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the weakest pre-expectation transformer of a program that consists
of exactly one while loop with some optional assignments at the beginning.
That means the only supported programs are of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">:=</span> <span class="n">e1</span>
<span class="n">y</span> <span class="o">:=</span> <span class="n">e2</span>
<span class="k">while</span> <span class="p">(</span><span class="n">cond</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span> <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; bool y; while(x) { { x := true } [0.5] { x := y } }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">one_loop_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">))</span>
<span class="go">λ𝐹. lfp 𝑋. [x] * ((((𝑋)[x/true]) * 0.5) + (((𝑋)[x/y]) * (1.0 - 0.5))) + [not x] * 𝐹</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; while(x) { if (x) { x := false } {x := true } }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">one_loop_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">,</span> <span class="n">program</span><span class="o">.</span><span class="n">instructions</span><span class="p">))</span>
<span class="go">λ𝐹. lfp 𝑋. [x] * (([x] * ((𝑋)[x/false])) + ([not x] * ((𝑋)[x/true]))) + [not x] * 𝐹</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>variable</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – Optional name for the variable to be used for the transformer. Must not occur elsewhere in the program.</p></li>
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <a class="reference internal" href="#id9" title="prodigy.analysis.backward.wp.ExpectationTransformer.substitute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpectationTransformer.substitute()</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p></li>
<li><p><strong>program</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code>) – </p></li>
<li><p><strong>instr</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">List</span></code></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Union" title="(in Python v3.10)"><code class="xref py py-data docutils literal notranslate"><span class="pre">Union</span></code></a>[<code class="xref py py-class docutils literal notranslate"><span class="pre">SkipInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">WhileInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">IfInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">AsgnInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ChoiceInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">LoopInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">TickInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ObserveInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ProbabilityQueryInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">ExpectationInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PlotInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">PrintInstr</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">OptimizationQuery</span></code>]]]) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#id12" title="prodigy.analysis.backward.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="id17">
<code class="sig-name descname"><span class="pre">general_wp_transformer</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">program</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">substitute</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/prodigy/analysis/backward/wp.html#general_wp_transformer"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id17" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the weakest pre-expectation transformer for any pGCL program. For
programs that consist of one big loop (see <span class="xref std std-ref">one_big_loop</span>),
<a class="reference internal" href="#id16" title="prodigy.analysis.backward.wp.one_loop_wp_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp_transformer()</span></code></a> is invoked directly. All other programs are
run through <code class="xref py py-func docutils literal notranslate"><span class="pre">prodigy.pgcl.cfg.program_one_big_loop()</span></code> first and then
<a class="reference internal" href="#id16" title="prodigy.analysis.backward.wp.one_loop_wp_transformer"><code class="xref py py-func docutils literal notranslate"><span class="pre">one_loop_wp_transformer()</span></code></a> is used. This will introduce a new,
additional variable for the program counter.</p>
<div class="highlight-pycon3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">prodigy.pgcl.parser</span> <span class="kn">import</span> <span class="n">parse_pgcl</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">program</span> <span class="o">=</span> <span class="n">parse_pgcl</span><span class="p">(</span><span class="s2">&quot;bool x; while(x) { while (y) </span><span class="si">{}</span><span class="s2"> }&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">general_wp_transformer</span><span class="p">(</span><span class="n">program</span><span class="p">))</span>
<span class="go">pc := 1;</span>
<span class="go">λ𝐹. lfp 𝑋. [not (pc = 0)] * (([pc = 1] * (([x] * ((𝑋)[pc/2])) + ([not x] * ((𝑋)[pc/0])))) + ([not (pc = 1)] * (([y] * ((𝑋)[pc/2])) + ([not y] * ((𝑋)[pc/1]))))) + [pc = 0] * 𝐹</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>substitute</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bool</span></code></a>) – Whether to call <a class="reference internal" href="#id9" title="prodigy.analysis.backward.wp.ExpectationTransformer.substitute"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ExpectationTransformer.substitute()</span></code></a> on the <code class="docutils literal notranslate"><span class="pre">body</span></code>.</p></li>
<li><p><strong>program</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Program</span></code>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><a class="reference internal" href="#id12" title="prodigy.analysis.backward.wp.LoopExpectationTransformer"><code class="xref py py-class docutils literal notranslate"><span class="pre">LoopExpectationTransformer</span></code></a></p>
</dd>
</dl>
</dd></dl>

</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="_sources/analysis.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2022, Lutz Klinkenberg.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
    </p>
  </div>
</footer>
  </body>
</html>